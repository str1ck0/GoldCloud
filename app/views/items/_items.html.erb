<div class="products-grid my-4">
  <% @items.each do |item| %>
    <%= link_to item_path(item) do %>
      <div class="item-card">
        <div style="height: 180px">  <!-- Create a fixed-height container -->
          <%= image_tag item.primary_photo_url, 
              class: "w-100 h-100 object-fit-cover", # Changed h-2 to h-100
              alt: item.itemable.name %>
        </div>
        <div class="item-infos d-flex justify-content-between align-items-end">
          <div>
            <p title="<%= item.itemable.name %>">
              <%= truncate(item.itemable.name, length: 20, omission: '...') %>
            </p>
            <% if item.itemable_type == 'Product' && (item.itemable.strain_type.present? || item.itemable.grow_type.present?) %>
              <div class="my-1 d-flex gap-1 flex-wrap">
                <% if item.itemable.strain_type.present? %>
                  <span class="badge <%= case item.itemable.strain_type
                    when 'indica' then 'bg-warning text-dark'
                    when 'sativa' then 'bg-success text-dark'
                    when 'hybrid' then 'bg-info text-dark'
                  end %>" style="font-size: 0.65rem;">
                    <%= item.itemable.strain_type.capitalize %>
                  </span>
                <% end %>
                <% if item.itemable.grow_type.present? %>
                  <span class="badge bg-secondary" style="font-size: 0.65rem;">
                    <%= item.itemable.grow_type.capitalize %>
                  </span>
                <% end %>
              </div>
            <% end %>
            <p id="item-price">
              R<%= item.itemable.price.round%><%= "/g" if item.itemable_type == 'Product' %>
            </p>
          </div>
          <div class="rating">
            <% item.average_rating.to_i.times do %>
              <i class="bi bi-star-fill text-warning"></i>
            <% end %>
            <% (5 - item.average_rating.to_i).times do %>
              <i class="bi bi-star text-warning"></i>
            <% end %>
            <span class="ms-1">(<%= item.ratings.where(hidden: false).count %>)</span>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>
</div>
